# **任务二描述：**

**基于ZigBee模块（白板）做基础开发，采用中断的方式开发按键功能，并进行光照度传感数据的采集，把采集到的光照度数据发送到串口。（注意：**光敏二极管传感器插在ZigBee模块的传感器插座上，把ZigBee模块放在智慧盒上**）**

**设备列表：**

1、PC机1台

2、ZigBee模块(白板) 1块

3、温湿度光敏传感器1个（或光敏二极管传感器）

4、智慧盒1套

5、CC Debugger仿真器1套

**任务要求：**

在工程源码目录“..\\work\\Task\\”文件夹下创建IAR工程，工程名字和工作空间的名字均为：“Task+准考证号后12位”，把“Task” 文件夹下的“test.c”、 “hal_defs.h” 这2个文件**添加到IAR工程中**，配置好工程选项参数，确保工程编译成功。（4分）。在“test.c”中添加代码实现以下功能：（注意：题目中涉及的变量均已在test.c中定义）

1、ZigBee模块一上电，所有LED灯不亮。(2分)

2、第奇数次按下SW1按键，LED1灯常亮，系统处于工作模式。(3分)

3、第偶数次按下SW1按键，LED1灯熄灭，系统处于停止模式。(3分)

4、按键SW1采用中断方式进行控制，上拉输入模式，下降沿触发中断。（9分）

5、串口模块已完成初始化设置，波特率115200，8位数据位，1位停止位，无校验位，无流控，可参照此处参数设置串口调试助手以便进行后续数据通信的验证。（10分）

6、系统工作时，调用代码中已提供的get_adc()函数完成光照度传感数据的采集，每隔2秒采集一次（定时器1已被配置好为每50ms产生一次溢出中断，中断服务函数已提供）。（8分）

7、每次采集到的光照度传感数据通过调用代码中已提供的UART0SendData(参数……)函数发往串口（发送的数据为2个字节，传感数据高位字节在前、低位字节在后），并让LED2灯闪烁1次（点亮约0.2秒，可使用已提供的Delay1Ms延时函数）。（8分）

8、**考试时间截止后，应确保“图集.docx”和源码工程文件已保存妥当，将“work”文件夹压缩成“work.zip”文件，点击“上传文件”将压缩后的“work.zip”上传至服务器指定目录。**
